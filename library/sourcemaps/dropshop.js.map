{"version":3,"sources":["dropshop.coffee"],"names":[],"mappings":"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","file":"dropshop.js","sourceRoot":"/source/","sourcesContent":["class @Dropshop\n\n  constructor: ->\n    console.log '[Dropshop] Initialising...'\n    @$doc = $(document)\n    @youTube = new YouTubePlayer()\n    @$body = $('body')\n    @$nav = $('#nav-header')\n    @windowHeightMargin = 0\n    @init()\n\n  init: ->\n    FastClick.attach(document.body);\n    @setWidths()\n    @onPageLoad()\n\n    @$doc.on 'click', 'a#menu-toggle', ->\n      dropshop.$body.toggleClass 'slide-from-right'\n      false\n\n    @$doc.on 'click', '#nav-header a', ->\n      pageId = $(this).data 'page-id'\n      if pageId\n        target = $('section[data-page-id=\"' + pageId + '\"]')\n        $('html, body').animate { scrollTop: target.offset().top }, 1000\n      false\n\n    @$doc.on 'click', '.share-fb', ->\n      url = this.href\n      url = $(this).data 'share-url' unless url\n      url = window.location.href unless url\n      FB.ui {\n        method: 'share'\n        href: url\n      }, (response) ->\n        console.log (response)\n      false\n\n    @$doc.on 'click', '.share-email', ->\n      url = this.href\n      url = window.location.href unless url\n      emailBody = 'Read this: '+ url\n      window.location = 'mailto:?subject=' + document.title + '&body=' +   emailBody;\n\n    @$doc.on 'click', '.share-twitter', ->\n      url = this.href\n      url = window.location.href unless url\n      popUp = window.open('http://twitter.com/intent/tweet?text=Read this: ' + url, 'popupwindow', 'scrollbars=yes,width=600,height=400,top=150,left=150')\n      popUp.focus()\n      false\n\n    @$doc.on 'click', '.video-controls a.play-pause', ->\n      el = $(this)\n      dropshop.youTube.playPause(el)\n      false\n\n    @$doc.on 'click', '.video-controls a.mute', ->\n      el = $(this)\n      dropshop.youTube.toggleVolume(el)\n      false\n\n    @$doc.on animEndEventName, '#logo-svg path#R', ->\n      $(this).parent().attr('class', 'animated')\n\n  onFullLoad: ->\n    console.log '[Dropshop] Page fully loaded'\n    window.fullyLoaded = true\n    @onScroll()\n    @$curtain = $('#curtain')\n\n  onPageFetch: ->\n    console.log '[Dropshop] fetching new page'\n    @showLoadingAnimation()\n\n  onPageLoad: ->\n    console.log '[Dropshop] onPageLoad'\n    @setEventListeners()\n    @$body.removeClass 'slide-from-right'\n    $('.hero-container').css\n      'height' : @sizes.windowHeight + 'px'\n    #$('nav#nav-header a.clicked').removeClass 'clicked'\n    @$allMods = $(\"[data-animate]\")\n    @$embeds = $(\".embeds\")\n    @videos = $('video')\n    @onScroll() if window.fullyLoaded # Trgger scroll to show visible embedsand videos\n    @hideLoadingAnimation()\n    @preloadBgImage()\n    if @isMobile\n      $('nav#nav-header:not(#top-banner nav#nav-header)').prependTo('body')\n    setTimeout(=>\n      $.each @$embeds, (i, el)=>\n        el = $(el)\n        el.renderEmbeds() if el.attr('data-status') is 'pending'\n    , 3000)\n    \n\n  setWidths:->\n    console.log '[Dropshop] setting page dims'\n    @sizes = \n      windowWidth  : $(window).width()\n      windowHeight : $(window).height()\n      headerHeight : $('header.header').outerHeight() || 0\n      navTop       : @$nav.offset().top\n    @isMobile = @sizes.windowWidth < 768\n\n    #@setWrapperHeight()\n\n  showLoadingAnimation: ->\n    \n\n  hideLoadingAnimation: ->\n    \n\n  setWrapperHeight: ->\n    # Amend #wrapper height in stylesheet so no need to do it on each page load\n    css = 'div#wrapper { min-height : '+ @sizes.windowHeight + 'px }'\n    $sheet = document.getElementById('styles')\n    unless $sheet\n      head = document.head or document.getElementsByTagName('head')[0]\n      $sheet = document.createElement('style')\n      $sheet.appendChild(document.createTextNode(\"\")) # WebKit hack :(\n      $sheet.type = 'text/css'\n      $sheet.setAttribute(\"id\", \"styles\")\n      head.appendChild $sheet\n    $sheet = document.styleSheets[(document.styleSheets.length - 1)]\n    @addCSSRule($sheet, '#wrapper', 'min-height :' + @sizes.windowHeight + 'px !important' )\n\n  addCSSRule: (sheet, selector, rules, index) ->\n    myrules = if sheet.cssRules then sheet.cssRules else sheet.rules\n    if myrules\n      sheet.crossdelete = if sheet.deleteRule then sheet.deleteRule else sheet.removeRule\n      i = 0\n      while i < myrules.length\n        if myrules[i].selectorText.toLowerCase().indexOf(selector) != -1\n          sheet.crossdelete i\n          i--\n        i++ \n\n      if 'insertRule' of sheet\n        sheet.insertRule selector + '{' + rules + '}', index\n      else if 'addRule' of sheet\n        sheet.addRule selector, rules, index\n      return\n\n  preloadBgImage: ->\n    img = $('.hero-container img')\n    return unless img.length\n    img.each (i, el)->\n      console.log '[App] loading background image'\n      $(el).parent().addClass 'loaded'\n\n  renderEmbeds: ->\n    $.each @$embeds, (i, el)=>\n      el = $(el)\n      postId = el.data 'post-id'\n      $.when @fetchEmbeds(postId).then (embedCodes)->\n        el.html('')\n        $.each embedCodes, (i, code)->\n          el.append code\n\n  fetchEmbeds: (postId)->\n    $.ajax\n      url: ajax.ajax_url\n      dataType: 'json'\n      type: 'POST'\n      data: \n        'action': 'get_post_embeds',\n        'post_id':   postId\n      success: (response)->\n        if response.embeds\n          return response.embeds\n        else\n          console.error 'There was a problem fetching the embed codes'\n\n\n\n\n  ######################\n  ## ON SCROLL\n  ######################\n  onScroll: ->\n    window.ticking = false\n    #unless dropshop.isMobile\n    if window.latestKnownScrollY > 44\n      dropshop.$body.addClass 'scrolled'\n    else\n      dropshop.$body.removeClass 'scrolled'\n\n    if window.latestKnownScrollY > (dropshop.sizes.navTop + 48)\n      if !dropshop.$nav.hasClass 'fixed'\n        console.log 'yes'\n        dropshop.$nav.addClass 'fixed'\n    else\n      dropshop.$nav.removeClass 'fixed'\n\n    dropshop.$embeds.each (i, el) ->\n      el = $(el)\n      if el.attr('data-status') is 'pending' and el.visible(true)\n        el.renderEmbeds()\n\n    unless dropshop.isMobile\n      if(dropshop.youTube.ready)\n        $youTubePlayer = $(dropshop.youTube.player.c)\n        if $youTubePlayer.visible(true)\n          dropshop.youTube.player.playVideo()\n        else\n          if dropshop.youTube.player.isMuted() and !dropshop.youTube.player.getPlayerState() == YT.PlayerState.PLAYING \n            dropshop.youTube.player.pauseVideo()\n            \n      dropshop.videos.each (i, el) ->\n        el = $(el)\n        if el.visible(true)\n          el.get(0).play() \n        else\n          el.get(0).pause() \n    # Animate elements on scroll when visible\n    dropshop.$allMods.each (i, el) ->\n      el = $(el)\n      el.addClass 'animate' if el.visible(true)\n    return\n\n\n\n\n  ######################\n  ## EVENT LISTENERS\n  ######################\n  setEventListeners: ->\n    # Use this for setting new event listeners that need to be set after ajax page loads\n    console.log '[Dropshop] setting event listeners'\n    \n    \n    # @$doc.on 'click', '.expand-text', ->\n    #   $(this).parent().toggleClass 'expanded'\n    #   false\n\n\n"]}