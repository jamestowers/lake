{"version":3,"sources":["scripts.coffee"],"names":[],"mappings":"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","file":"scripts.js","sourceRoot":"/source/","sourcesContent":["# Fix IE consol.log bug\nif !window.console\n  window.console = {}\nif !window.console.log\n  window.console.log = ->\n\nwindow.latestKnownScrollY = 0\n\n# transition end event name\ntransEndEventNames =\n  'WebkitTransition': 'webkitTransitionEnd'\n  'MozTransition': 'transitionend'\n  'OTransition': 'oTransitionEnd'\n  'msTransition': 'MSTransitionEnd'\n  'transition': 'transitionend'\nwindow.transEndEventName = transEndEventNames[Modernizr.prefixed('transition')]\n\nanimEndEventNames =\n  'WebkitAnimation' : 'webkitAnimationEnd',\n  'OAnimation' : 'oAnimationEnd',\n  'msAnimation' : 'MSAnimationEnd',\n  'animation' : 'animationend'\nwindow.animEndEventName = animEndEventNames[Modernizr.prefixed('animation')]\n\n$.fn.visible = (partial) ->\n  $t = $(this)\n  $w = $(window)\n  viewTop = latestKnownScrollY\n  viewBottom = viewTop + $w.height()\n  _top = $t.offset().top\n  _bottom = _top + $t.height()\n  compareTop = (if partial is true then _bottom else _top)\n  compareBottom = (if partial is true then _top else _bottom)\n  (compareBottom <= viewBottom) and (compareTop >= viewTop)\n\n$.fn.renderEmbeds = ->\n  $el = $(this)\n  $el.attr('data-status', 'loading')\n  postId = $el.data 'post-id'\n  console.log '[Dropshop] Loading embeds on page id: ' + postId\n  $.when dropshop.fetchEmbeds(postId).then (embedCodes)->\n    $el.html('')\n    $.each embedCodes, (i, code)->\n      $el.append code\n      $el.attr('data-status', 'loaded')\n\nwindow.fullyLoaded = false\nwindow.dropshop = new Dropshop()\n\n\n\n##################################\n## requestAnimationFrame Polyfill\n##################################\n\nlastTime = 0\nvendors = [\n  \"ms\"\n  \"moz\"\n  \"webkit\"\n  \"o\"\n]\nx = 0\n\nwhile x < vendors.length and not window.requestAnimationFrame\n  window.requestAnimationFrame = window[vendors[x] + \"RequestAnimationFrame\"]\n  window.cancelAnimationFrame = window[vendors[x] + \"CancelAnimationFrame\"] or window[vendors[x] + \"CancelRequestAnimationFrame\"]\n  ++x\nunless window.requestAnimationFrame\n  window.requestAnimationFrame = (callback, element) ->\n    currTime = new Date().getTime()\n    timeToCall = Math.max(0, 16 - (currTime - lastTime))\n    id = window.setTimeout(->\n      callback currTime + timeToCall\n      return\n    , timeToCall)\n    lastTime = currTime + timeToCall\n    id\nunless window.cancelAnimationFrame\n  window.cancelAnimationFrame = (id) ->\n    clearTimeout id\n    return\n################################## \n## end requestAnimationFrame Polyfill\n##################################\n\n\n\n\nrepeatOften = ->\n  window.globalID = requestAnimationFrame(repeatOften)\n  return\n\n# ON SCROLL EVENTS\n\n# Call requestTick on window.scroll - see bottom\nrequestTick = ->\n  requestAnimationFrame dropshop.onScroll  unless window.ticking\n  window.ticking = true\n  return\n\n\n\n\n\n$(window).scroll ->\n  window.latestKnownScrollY = window.scrollY\n  requestTick()\n\n$(window).resize ->\n  dropshop.setWidths()\n\n$(window).load ->\n  dropshop.onFullLoad()\n\n\n\n\n\n\n\n\n\n\n#! A fix for the iOS orientationchange zoom bug.\n# Script by @scottjehl, rebound by @wilto.\n# MIT License.\n#\n((w) ->\n  \n  # This fix addresses an iOS bug, so return early if the UA claims it's something else.\n  restoreZoom = ->\n    meta.setAttribute \"content\", enabledZoom\n    enabled = true\n    return\n  disableZoom = ->\n    meta.setAttribute \"content\", disabledZoom\n    enabled = false\n    return\n  checkTilt = (e) ->\n    aig = e.accelerationIncludingGravity\n    x = Math.abs(aig.x)\n    y = Math.abs(aig.y)\n    z = Math.abs(aig.z)\n    \n    # If portrait orientation and in one of the danger zones\n    if not w.orientation and (x > 7 or ((z > 6 and y < 8 or z < 8 and y > 6) and x > 5))\n      disableZoom()  if enabled\n    else restoreZoom()  unless enabled\n    return\n  return  unless /iPhone|iPad|iPod/.test(navigator.platform) and navigator.userAgent.indexOf(\"AppleWebKit\") > -1\n  doc = w.document\n  return  unless doc.querySelector\n  meta = doc.querySelector(\"meta[name=viewport]\")\n  initialContent = meta and meta.getAttribute(\"content\")\n  disabledZoom = initialContent + \",maximum-scale=1\"\n  enabledZoom = initialContent + \",maximum-scale=10\"\n  enabled = true\n  x = undefined\n  y = undefined\n  z = undefined\n  aig = undefined\n  return  unless meta\n  w.addEventListener \"orientationchange\", restoreZoom, false\n  w.addEventListener \"devicemotion\", checkTilt, false\n  return\n) this"]}