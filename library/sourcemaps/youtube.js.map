{"version":3,"sources":["youtube.coffee"],"names":[],"mappings":"AAAA;EAAM,IAAC,CAAA;IAEQ,uBAAA;MACX,OAAO,CAAC,GAAR,CAAY,qCAAZ;MACA,IAAC,CAAA,MAAD,GAAU;MACV,IAAC,CAAA,KAAD,GAAS;MACT,IAAC,CAAA,IAAD,GAAQ;MACR,IAAC,CAAA,IAAD,CAAA;IALW;;4BAOb,IAAA,GAAM,SAAA;AACJ,UAAA;MAAA,MAAM,CAAC,uBAAP,GAAiC,SAAA;eAC/B,QAAQ,CAAC,OAAO,CAAC,qBAAjB,CAAA;MAD+B;MAGjC,GAAA,GAAM,QAAQ,CAAC,aAAT,CAAuB,QAAvB;MACN,GAAG,CAAC,GAAJ,GAAU;MACV,cAAA,GAAiB,QAAQ,CAAC,oBAAT,CAA8B,QAA9B,CAAwC,CAAA,CAAA;aACzD,cAAc,CAAC,UAAU,CAAC,YAA1B,CAAuC,GAAvC,EAA4C,cAA5C;IAPI;;4BASN,qBAAA,GAAuB,SAAA;AACrB,UAAA;MAAA,OAAO,CAAC,GAAR,CAAY,kDAAZ;MACA,OAAA,GAAU,CAAA,CAAE,iBAAF;MACV,IAAA,CAAc,OAAO,CAAC,MAAtB;AAAA,eAAA;;MACA,SAAA,GAAY,OAAO,CAAC,IAAR,CAAa,UAAb;aACZ,IAAC,CAAA,MAAD,GAAc,IAAC,EAAE,CAAC,MAAJ,CAAY,gBAAZ,EACZ;QAAA,MAAA,EAAQ,KAAR;QACA,KAAA,EAAO,MADP;QAEA,OAAA,EAAS,SAFT;QAGA,MAAA,EACE;UAAA,SAAA,EAAW,IAAC,CAAA,aAAZ;UACA,eAAA,EAAiB,IAAC,CAAA,mBADlB;SAJF;OADY;IALO;;4BAavB,aAAA,GAAe,SAAC,KAAD;MACb,OAAO,CAAC,GAAR,CAAY,kCAAZ;MACA,QAAQ,CAAC,OAAO,CAAC,KAAjB,GAAyB;MACzB,KAAK,CAAC,MAAM,CAAC,IAAb,CAAA;IAHa;;4BAMf,mBAAA,GAAqB,SAAC,KAAD,GAAA;;4BAMrB,SAAA,GAAW,SAAA;aACT,IAAC,CAAA,MAAM,CAAC,SAAR,CAAA;IADS;;4BAGX,UAAA,GAAY,SAAA;aACV,IAAC,CAAA,MAAM,CAAC,UAAR,CAAA;IADU;;4BAGZ,SAAA,GAAW,SAAA;aACT,IAAC,CAAA,MAAM,CAAC,SAAR,CAAA;IADS;;4BAGX,SAAA,GAAW,SAAC,GAAD;MACT,IAAG,IAAC,CAAA,MAAM,CAAC,cAAR,CAAA,CAAA,KAA4B,EAAE,CAAC,WAAW,CAAC,OAA9C;QACE,IAAC,CAAA,UAAD,CAAA;eACA,GAAG,CAAC,WAAJ,CAAgB,YAAhB,CAA6B,CAAC,QAA9B,CAAuC,WAAvC,EAFF;OAAA,MAAA;QAIE,IAAC,CAAA,SAAD,CAAA;eACA,GAAG,CAAC,WAAJ,CAAgB,WAAhB,CAA4B,CAAC,QAA7B,CAAsC,YAAtC,EALF;;IADS;;4BAQX,YAAA,GAAc,SAAC,GAAD;MACZ,IAAG,IAAC,CAAA,MAAM,CAAC,OAAR,CAAA,CAAH;QACE,IAAC,CAAA,MAAM,CAAC,MAAR,CAAA;eACA,GAAG,CAAC,WAAJ,CAAgB,aAAhB,CAA8B,CAAC,QAA/B,CAAwC,WAAxC,EAFF;OAAA,MAAA;QAIE,IAAC,CAAA,MAAM,CAAC,IAAR,CAAA;eACA,GAAG,CAAC,WAAJ,CAAgB,WAAhB,CAA4B,CAAC,QAA7B,CAAsC,aAAtC,EALF;;IADY;;;;;AA5DhB","file":"youtube.js","sourceRoot":"/source/","sourcesContent":["class @YouTubePlayer\n\n  constructor: ->\n    console.log '[Dropshop][YouTube] Initialising...'\n    @player = null\n    @ready = false\n    @done = false\n    @init()\n\n  init: ->\n    window.onYouTubeIframeAPIReady = ->\n      dropshop.youTube.scanForYouTubePlayers()\n\n    tag = document.createElement('script')\n    tag.src = 'https://www.youtube.com/iframe_api'\n    firstScriptTag = document.getElementsByTagName('script')[0]\n    firstScriptTag.parentNode.insertBefore tag, firstScriptTag\n\n  scanForYouTubePlayers: ->\n    console.log '[Dropshop][YouTube] Scanning for YouTube players'\n    $player = $('#youtube-player')\n    return unless $player.length\n    youtubeId = $player.data('video-id')\n    @player = new (YT.Player)('youtube-player',\n      height: '562'\n      width: '1000'\n      videoId: youtubeId\n      events:\n        'onReady': @onPlayerReady\n        'onStateChange': @onPlayerStateChange)\n\n  onPlayerReady: (event) ->\n    console.log '[Dropshop][YouTube] Player ready'\n    dropshop.youTube.ready = true\n    event.target.mute()\n    return\n\n  onPlayerStateChange: (event) ->\n    # if event.data == YT.PlayerState.PLAYING and !@done\n      # setTimeout @stopVideo, 6000\n      # @done = true\n    return\n\n  playVideo: ->\n    @player.playVideo()\n\n  pauseVideo: ->\n    @player.pauseVideo()\n\n  stopVideo: ->\n    @player.stopVideo()\n\n  playPause: (btn)->\n    if @player.getPlayerState() == YT.PlayerState.PLAYING \n      @pauseVideo() \n      btn.removeClass('icon-pause').addClass 'icon-play'\n    else \n      @playVideo()\n      btn.removeClass('icon-play').addClass 'icon-pause'\n\n  toggleVolume: (btn)->\n    if @player.isMuted()\n      @player.unMute() \n      btn.removeClass('icon-volume').addClass 'icon-mute'\n    else \n      @player.mute()\n      btn.removeClass('icon-mute').addClass 'icon-volume'\n\n"]}